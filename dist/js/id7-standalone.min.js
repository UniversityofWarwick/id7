!function(r){"use strict";var e={Defaults:{screenSizes:[{name:"lg",test:function(){return Modernizr.mq("only all and (min-width: 1200px)")},container:1170},{name:"md",test:function(){return Modernizr.mq("only all and (min-width: 992px)")},container:970},{name:"sm",test:function(){return Modernizr.mq("only all and (min-width: 768px)")},container:750},{name:"xs",test:function(){return!0}}],eventName:"id7:reflow"}},s=function(){function t(t){t=r.extend({},e.Defaults,t),this.options=t,this.onScreenResize(),this.wireEventHandlers()}return r.extend(t.prototype,{_screenConfig:function(){return _.find(this.options.screenSizes,function(t){return t.test()})},onScreenResize:function(t,e){var n=this._screenConfig();(e||"xs"===n.name||n.name!==this.lastScreenConfig)&&(this.options.container.trigger(this.options.eventName,[n]),this.lastScreenConfig=n.name)},reflow:function(){this.onScreenResize({},!0)},wireEventHandlers:function(){r(window).on("resize.id7.reflow.onScreenResize",r.proxy(this.onScreenResize,this)),"complete"===document.readyState?this.reflow():r(window).on("load",r.proxy(this.reflow,this))}}),t}();r.fn.reflow=function(o){return this.each(function(t,e){var n=r(e),i=n.data("id7.reflow"),a=r.extend({},n.data(),{container:n},"object"==typeof o&&o);i||n.data("id7.reflow",i=new s(a)),"reflow"!==o&&"force"!==o&&!0!==o||i.reflow()})},r(function(){r(window).reflow()})}(jQuery),function(l){"use strict";function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var c={Templates:{Popover:function(t){return'<div class="account-info"><iframe src="'+e(t.useMwIframe?t.iframelink+"?embedded":t.legacyIframeLink)+'" scrolling="auto" frameborder="0" allowtransparency="true" seamless sandbox="allow-same-origin allow-scripts allow-top-navigation allow-forms allow-popups"></iframe></div><div class="actions"><div class="btn-group btn-group-justified"><div class="btn-group sign-out"><a href="'+e(t.logoutlink)+'" class="btn btn-default">Sign out</a></div></div></div>'},Action:function(t){return'<div class="btn-group"><a href="'+e(t.href)+'" title="'+e(t.tooltip)+'" class="btn btn-default '+e(t.classes)+'">'+e(t.title)+"</a></div>"}},Defaults:{container:!1,iframelink:"https://my.warwick.ac.uk/",notificationsApi:"https://my.warwick.ac.uk/api/id7/notifications/unreads",legacyIframeLink:"https://websignon.warwick.ac.uk/origin/account/popover",showNotificationsBadge:!0,useMwIframe:!0,maxNumberNotifications:99,template:['<div class="popover my-warwick hybrid-overlay">','<div class="arrow"></div>','<div class="popover-inner">','<div class="popover-content"><p></p></div>',"</div>","</div>"].join("")},MessagePrefix:"message.id7.account-popover."},o=function(){function t(t){t=l.extend({},c.Defaults,t),this.$trigger=t.trigger,this.options=t,void 0===this.options.logoutlink&&(this.options.logoutlink=this.$trigger.attr("href")),this.wireEventHandlers()}return l.extend(t.prototype,{createPopover:function(t){var e={container:this.options.container,content:c.Templates.Popover(this.options),template:this.options.template,html:!0,placement:"bottom",title:"Account information",trigger:"manual"};t.popover(e)},isBlacklistedDevice:function(){return-1!==navigator.userAgent.indexOf("iPad")},isMwFeatureAvailable:function(){return!this.isBlacklistedDevice()},wireEventHandlers:function(){var a=this.$trigger,n=this,i=this.options.iframelink;if(this.options.name){var t='<span class="fa-stack id7-notifications-badge">  <i class="fa fa-circle fa-stack-2x"></i>  <strong class="fa-stack-1x fa fa-spinner fa-spin brand-text counter-value"></strong> </span>';this.isMwFeatureAvailable()&&this.options.showNotificationsBadge||(t=""),a.html(this.options.name+t+'<span class="caret"></span>')}var e,o,r,s=a.find(".id7-notifications-badge");a.on("click",function(t){return t.preventDefault(),t.stopPropagation(),a.popover("toggle"),s.find(".counter-value:not(.fa-exclamation-triangle):not(.fa-spinner)").text("0"),n.options.iframelink=i,a.data("bs.popover").options.content=c.Templates.Popover(n.options),s.removeClass("animating"),a.blur(),!1}),this.createPopover(a),this.options.showNotificationsBadge&&this.isMwFeatureAvailable()&&(e=this.options.notificationsApi,o=function(t){var e=Math.min(t.unreads,99);s.find(".counter-value").removeClass("fa-spinner").removeClass("fa-spin").addClass("slideInDown").text(e),0<e&&(s.fadeIn().addClass("animating"),n.options.iframelink=i+"alerts",a.data("bs.popover").options.content=c.Templates.Popover(n.options))},r=function(){s.find(".counter-value").removeClass("fa-spinner").removeClass("fa-spin").addClass("fa-exclamation-triangle"),s.attr("title","There was a problem communicating with the MyWarwick notifications service")},l.ajax({url:e,success:o,error:r,dataType:"json",xhrFields:{withCredentials:!0}})),l("html").on("click.popoverDismiss",function(t){var e=l(t.target);0===e.closest(".popover").length&&0===e.closest(".use-popover").length&&0===e.closest(a).length&&a.popover("hide")});var d=l.proxy(function(t,e){if(this.options.useMwIframe="xs"!==e.name&&580<=l(window).height()&&this.isMwFeatureAvailable(),a.find(".id7-notifications-badge").toggle(this.options.useMwIframe),void 0!==a.data("bs.popover")){a.data("bs.popover").options.content=c.Templates.Popover(this.options);var n=this.options.useMwIframe&&this.isMwFeatureAvailable()?"my-warwick":"account-information",i=a.data("bs.popover");i.tip().removeClass("account-information","my-warwick").addClass(n),i.tip().hasClass("in")&&(a.popover("show"),a.next(".popover").removeClass("loading"))}},this);(l(window).on("id7:reflow",d),"complete"===document.readyState&&void 0!==l(window).data("id7.reflow"))&&d({},l(window).data("id7.reflow")._screenConfig())},onMessage:function(t,e){var n=this.$trigger.next(".popover");switch(t){case"addAction":_.defaults(e,{classes:"",tooltip:""}),n.find(".actions > .btn-group").prepend(c.Templates.Action(e)),n.find(".actions > .btn-group > .btn-group").first().find('[title]:not([title=""])').tooltip({placement:"bottom"});break;case"resizeIframe":n.find(".account-info iframe").height(e.height);break;case"layoutDidMount":n.addClass("loaded"),this.updateColourTheme(e.colourTheme);break;case"colourThemeChange":this.updateColourTheme(e.colourTheme);break;case"signedOut":var i=this.options.loginlink;n.find(".actions > .btn-group > .sign-out").replaceWith(c.Templates.Action({href:i,classes:"sign-in",title:"Sign in",tooltip:""}));break;default:console.error("Unexpected message type: "+t)}},updateColourTheme:function(t){this.$trigger.next(".popover").removeClass(function(t,e){return l.grep(e.split(" "),function(t){return 0===t.indexOf("theme-")}).join(" ")}).addClass("theme-"+t)}}),t}();l.fn.accountPopover=function(a){return a=a||{},this.each(function(t,e){var n=l(e),i=new o(l.extend({},n.data(),a,{trigger:n}));n.data("id7.account-popover",i)})},l(function(){l('[data-toggle="id7:account-popover"]').accountPopover(),l(window).on("message",function(t){var e=t.originalEvent.origin;try{var n=JSON.parse(t.originalEvent.data);if(n.type&&0===n.type.indexOf(c.MessagePrefix)){var i=n.type.substring(c.MessagePrefix.length);l('[data-toggle="id7:account-popover"]').each(function(){var t=l(this).data("id7.account-popover");0!==t.options.iframelink.indexOf(e)&&0!==t.options.legacyIframeLink.indexOf(e)?console.error("Ignored message of type "+i+" because origin "+e+" didn't match iframe link "+t.options.iframelink):t.onMessage(i,n)})}}catch(t){}})})}(jQuery),function(s){"use strict";var d={ScreenSizes:[{name:"lg",test:function(){return Modernizr.mq("only all and (min-width: 1200px)")},container:1170},{name:"md",test:function(){return Modernizr.mq("only all and (min-width: 992px)")},container:970},{name:"sm",test:function(){return Modernizr.mq("only all and (min-width: 768px)")},container:750},{name:"xs",test:function(){return!0}}],Templates:{moreContainer:['<ul class="nav navbar-nav navbar-right">','<li class="dropdown">','<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fas fa-caret-down"></i></a>','<ul class="dropdown-menu" role="menu"></ul>',"</li>","</ul>"].join(""),marker:'<div class="id7-navigation-marker"></div>'},Defaults:{fixedHeader:!0,fixedNav:!0,fitToWidth:!1,collapseSmallscreen:!1,trimLinkTitles:{maxLength:60,append:"&hellip;"}},HeadroomEvents:{onPin:function(){s(this.elem).trigger("id7:headroom:onPin")},onUnpin:function(){s(this.elem).trigger("id7:headroom:onUnpin")}}},o=function(){function t(t){t=s.extend({},d.Defaults,t),this.$container=t.container,t.trimLinkTitles&&"object"!=typeof t.trimLinkTitles&&(t.trimLinkTitles=s.extend({},d.Defaults.trimLinkTitles)),this.options=t,this.options.fixedHeader&&this.markHeaderFixedPosition(),this.options.fixedNav&&this.markFixedPosition(),t.trimLinkTitles&&this.trimLinkTitles(),this.wireEventHandlers()}return s.extend(t.prototype,{trimLinkTitles:function(){var a=this.options.trimLinkTitles;this.$container.find(".nav a").filter(function(){return s.trim(s(this).text()).length>a.maxLength}).each(function(){var t=s(this),e=s.trim(t.text()),n=e.split(/\s+/g),i=[];s.each(n,function(t,e){if((i.join(" ")+" "+e).length>a.maxLength)return!1;i.push(e)}),t.attr("title",e).text(i.join(" ")).append(a.append)})},affixHeader:function(){var t=s(".id7-header-text h1");if(t.length){this.markHeaderFixedPosition();var e=s(".id7-header-text").offset().top,n=e;0<s(".id7-main-content-area").length&&(n=s(".id7-main-content-area").offset().top);var i=s.extend(d.HeadroomEvents,{offset:n});t.affix({offset:{top:e}}).headroom(i)}},affixNav:function(){var t,e=this.$container,n=s(".id7-header-text h1"),i=t=n.length?n.offset().top:e.offset().top;0<s(".id7-main-content-area").length&&(i=s(".id7-main-content-area").offset().top);var a=s.extend(d.HeadroomEvents,{offset:i});e.affix({offset:{top:t}}).headroom(a)},fitToWidth:function(o){var r=this.options;this.$container.find(".navbar:not(.navbar-secondary)").each(function(){var t=s(this),e=t.find("> .nav").first(),n=t.find("> .navbar-right");if(n.find("> .dropdown > .dropdown-menu > li").each(function(){var t=s(this);e.append(t)}),0===n.length&&(n=s(d.Templates.moreContainer),t.append(n)),n.addClass("hidden"),!r.collapseSmallscreen||"xs"!=o.name){var i=function(){return _.some(_.union(e.find("> li").get(),n.get()),function(t){return s(t).is(":visible")&&0<s(t).position().top})};if(i()){for(n.removeClass("hidden");n.find("> .dropdown > .dropdown-menu").prepend(e.find("> li:not(.nav-breadcrumb)").last().css("height","")),i()&0<e.find("> li:not(.nav-breadcrumb)").length;);var a=n.find("> .dropdown");a.toggleClass("active",0<a.find("li.active").length)}}})},updateWrappedState:function(){this.$container.find(".navbar").each(function(){var t=s(this),e=t.hasClass("navbar-wrapped"),n=t.find("> .nav > li:last"),i=n.length&&0<n.position().top;i!=e&&(t.addClass("important-no-transition"),t.toggleClass("navbar-wrapped",i),_.defer(function(){t.removeClass("important-no-transition")}))})},updateDropdownBehaviour:function(e){this.$container.find(".navbar").each(function(){var t=s(this);"xs"===e.name?t.find(".dropdown-toggle").attr("data-toggle","dropdown").attr("role","button").attr("aria-expanded",!1):t.find(".dropdown-toggle").removeAttr("data-toggle").removeAttr("role").removeAttr("aria-expanded").parent().removeClass("open")})},getAffixedHeight:function(){var t=0;return this.options.fixedHeader&&(t+=s(".id7-header-text h1").outerHeight()),this.options.fixedNav&&(t+=this.$container.outerHeight()),t},hashChanged:function(){var t=this.getAffixedHeight();setTimeout(function(){window.scrollBy(0,-t)},1)},markHeaderFixedPosition:function(){s(".id7-header-text").css("height","");var t=s(".id7-header-text h1"),e=t.hasClass("affix");e&&t.removeClass("affix"),s(".id7-header-text").height(s(".id7-header-text").height()),e&&t.addClass("affix")},markFixedPosition:function(){var t=this.$container.next(".id7-navigation-marker");0===t.length&&(t=s(d.Templates.marker),this.$container.after(t)),t.height(this.$container.height())},wireEventHandlers:function(){"complete"===document.readyState?(this.options.fixedNav&&this.affixNav(),this.options.fixedHeader&&this.affixHeader(),this.updateWrappedState()):s(window).on("load",s.proxy(function(){this.options.fixedNav&&this.affixNav(),this.options.fixedHeader&&this.affixHeader(),this.updateWrappedState()},this));var t=s.proxy(function(t,e){this.options.fitToWidth&&this.fitToWidth(e),this.options.fixedHeader&&this.markHeaderFixedPosition(),this.options.fixedNav&&this.markFixedPosition(),this.updateWrappedState(),this.updateDropdownBehaviour(e)},this);(s(window).on("id7:reflow",t),"complete"===document.readyState&&void 0!==s(window).data("id7.reflow"))&&t({},s(window).data("id7.reflow")._screenConfig());this.$container.on("click",".nav > li",function(t){var e=s(t.target).closest("a");if(!(0<e.length))return 0<(e=s(this).find("a").first()).length?(t.stopPropagation(),t.preventDefault(),e[0].click(),!1):void 0}),location.hash&&this.hashChanged(),s(window).on("hashchange",s.proxy(this.hashChanged,this))}}),t}();s.fn.id7Navigation=function(a){return a=a||{},this.each(function(t,e){var n=s(e),i=new o(s.extend({},n.data(),a,{container:n}));n.data("id7.navigation",i)})},s(function(){s(".id7-navigation").id7Navigation();var t=document.location.toString();if(t.match("#")&&t.split("#")[1].length){var e=s('.nav-tabs a[href="#'+t.split("#")[1]+'"]');e&&e.tab("show")}s(".nav-tabs a").on("shown.bs.tab.id7Navigation",function(t){"replaceState"in window.history?window.history.replaceState({},null,t.target.hash):window.location.hash=t.target.hash})})}(jQuery),function(o){"use strict";var r=function(t){(t=t||{}).input.typeahead({minLength:t.minLength,hint:t.hint},{name:t.name,source:t.source,display:t.display,templates:t.templates,async:!0,limit:1e3}).on("keydown",function(t){switch(t.which||t.keyCode){case 38:case 40:t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||t.stopPropagation()}})};o.fn.searchSuggest=function(a){return a=a||{},this.each(function(t,e){var n=o(e),i=new r(o.extend({},n.data(),a,{input:n}));n.data("id7.search-suggest",i)})},o(function(){function a(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}o('input[data-suggest="go"]').each(function(t,n){o(n).next(".fa").on("click",function(t){t.preventDefault(),t.stopPropagation(),o(n).closest("form").submit()});var e=3,i=3;Modernizr.mq("only all and (min-width: 768px)")&&(e=2,i=6),o(n).searchSuggest({name:"go",source:function(t,e,n){o.getJSON("//sitebuilder.warwick.ac.uk/sitebuilder2/api/go/redirects.json?maxResults="+i+"&prefix="+encodeURIComponent(t)+"&callback=?",n)},display:"path",minLength:e,hint:!1,templates:{suggestion:function(t){return'<div><p class="go-path">'+a(t.path)+'</p><p class="go-description">'+(void 0!==t.description?a(t.description):"")+"</p></div>"}}}),o(n).data("ttTypeahead").input.onSync("queryChanged",function(t,e){o(n).data("original-query",e)}),o(n).on("typeahead:select",function(t,e){window.location="http://go.warwick.ac.uk/"+e.path+"?goSearchReferer="+encodeURIComponent(window.location)+"&goSearchQuery="+encodeURIComponent(o(this).data("original-query"))}),o(n).width()<88&&o(n).attr("placeholder","Search")})})}(jQuery),function(c){"use strict";var p={Templates:{PopoutLink:['<span class="id7-table-wrapper-popout">',"(",'<a href="#" data-toggle="id7:popout-table">',"Pop-out table","</a>",")","</span>"].join(""),Modal:['<div class="id7-wide-table-popout-modal modal fade" tabindex="-1" role="dialog" aria-hidden="true">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><span class="modal-title">&nbsp;</span></div><div class="modal-body"></div>',"</div>","</div>","</div>"].join("")},Defaults:{container:"id7-wide-table-wrapper-container",wrapper:"table-responsive",popout:function(){return Modernizr.mq("only all and (min-width: 768px)")},doublescroll:!0}},o=function(){function t(d){d=c.extend({},p.Defaults,d);var l=this;l.findWideTables(d.container).each(function(t,e){var n=c(e),i=c.extend({},d,n.data());if(i.wrapper&&"string"!=typeof i.wrapper&&(i.wrapper=p.Defaults.wrapper),i.container&&"string"!=typeof i.container&&(i.container=p.Defaults.container),i.wrapper){l.wrap(n,i.wrapper,i.container);var a=n.parent(),o=a.parent(),r=i.popout,s=i.doublescroll;"function"==typeof i.popout&&(r=i.popout()),"function"==typeof i.doublescroll&&(r=i.doublescroll()),r&&l.popout(n,a,o),s&&l.doubleScroll(n,a)}})}return c.extend(t.prototype,{findWideTables:function(t){return t.find("table").filter(function(){return 0===c(this).parents(".no-wide-tables").length}).filter(function(){var t=c(this),e=t.css("max-width");t.css("max-width","none");var n=!t.data("id7.wide-tables.wrapped")&&Math.floor(t.width())>t.parent().width();return t.css("max-width",e),n})},wrap:function(t,e,n){return t.wrap(c("<div />").addClass(n).append(c("<div />").addClass(e))).data("id7.wide-tables.wrapped",!0),t.parent()},popout:function(t,e,n){if(t.is(":visible")&&!t.hasClass("sb-no-wrapper-table-popout")){n.prepend(p.Templates.PopoutLink).append(p.Templates.PopoutLink);var i=c(c.parseHTML(p.Templates.Modal)).appendTo(document.body);n.on("click",'[data-toggle="id7:popout-table"]',function(t){return t.stopPropagation(),t.preventDefault(),i.find(".modal-body").html(e.html()),i.modal().modal("show"),!1})}return t},doubleScroll:function(t,e){return e.doubleScroll(),t}}),t}();c.fn.wideTables=function(a){return a=a||{},this.each(function(t,e){var n=c(e),i=new o(c.extend({},n.data(),a,{container:n}));n.data("id7.wide-tables",i)})},c(window).on("load id7:ready",function(){c(".id7-main-content").wideTables()}),c(function(){c(window).trigger("id7:ready")})}(jQuery),function(){"use strict";Modernizr.addTest("safari",function(){var t=window.navigator.userAgent;return 0<=t.indexOf("Safari/")&&-1==t.indexOf("Chrome/")})}(),function(){"use strict";Modernizr.addTest("ie-or-edge",function(){var t=window.navigator.userAgent;return/MSIE 10/i.test(t)||/MSIE 9/i.test(t)||/rv:11.0/i.test(t)||/Edge\/\d./i.test(t)})}(),function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var t=document.createElement("style");t.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(t)}}();
//# sourceMappingURL=id7-standalone.min.js.map